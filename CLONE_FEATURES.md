# Clone Feature Tracker

## Context Sources
- README and docs
- TODO/FIXME markers in code
- Test and build failures
- Gaps found during codebase exploration

## Candidate Features To Do
### Global Cycle 12 (2026-02-11) Plan
- [x] P1 (Selected): Add deterministic saved-search roundtrip smoke coverage under mock mode by introducing a dedicated smoke scenario that verifies persisted query/filter/sort/timeline/result-limit/verbatim state on reload and rerun. (Delivered in Global Cycle 12, commit `a45d4c1`) (Score: impact=high effort=med strategic=high differentiation=med risk=low-med confidence=med-high)
- [x] P1 (Selected): Add top-k parity regression tests covering relevance score ties plus invalid timestamp (`createdMs=0` fallback) edge cases to prove UI ordering always matches full export ordering. (Delivered in Global Cycle 12, commit `a45d4c1`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Improve saved-search scanability by surfacing `verbatim` state in saved-search cards and lock behavior via targeted test coverage and smoke assertions. (Delivered in Global Cycle 12, commit `a45d4c1`) (Score: impact=med effort=low strategic=med-high differentiation=med risk=low confidence=high)
- [ ] P2: Add stale-selection smoke assertions that exercise `Prune stale` recovery under cross-tab deletion simulation.
- [ ] P2: Add perf threshold guardrails for 10k Unified Search datasets with variance-tolerant med/p95 limits in CI.
- [ ] P2: Add Unified Search zero-results guidance card with one-click reset actions for operators/type/timeline/verbatim.
- [ ] P2: Add shareable Unified Search URL state (`q`, `type`, `sort`, `time`, `limit`, `verbatim`) with hydration-safe defaults.
- [ ] P2: Add explicit malformed-write diagnostics panel in Library data tools for recent localStorage write failures.
- [ ] P3: Refactor shared `signal-*` storage keys into one constants module and migrate all surfaces to it.
- [ ] P3: Add NDJSON malformed-line integration check script for `/api/answer/stream` framing resilience.
- [ ] P3: Add focused tests for notes payload sanitation used by Unified Search preload/read-refresh paths.
- [ ] P3: Add JSON artifact output mode for `scripts/search-perf.mjs` to support historical trend diffing.
- [ ] P3: Add small query-operator lint utility to detect unsupported operator combinations by result type in docs/examples.
- [ ] P3: Add smoke validation for diagnostics-mode count consistency (`loaded >= matched >= visible`) across all result types.
- [ ] P3: Add keyboard regression tests for cross-over behavior when suggestion list empties during Arrow navigation.
- [ ] P3: Add explicit CSV export parity tests for multiline citation URLs and escaped whitespace edge cases.

### Global Cycle 11 (2026-02-11) Plan
- [x] P1 (Selected): Add deterministic Unified Search smoke fixtures with an internal smoke route and script assertions that verify operator-filtered non-empty results and known fixture hits. (Delivered in Global Cycle 11, commit `f3e107b`) (Score: impact=high effort=med strategic=high differentiation=med risk=low-med confidence=med-high)
- [x] P1 (Selected): Add localStorage persistence write guards for Unified Search state writes (recent/saved/verbatim/threads) with quota-aware failure handling and user-visible feedback to prevent silent state loss. (Delivered in Global Cycle 11, commit `f3e107b`) (Score: impact=high effort=med strategic=high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Add `aria-describedby` linkage between the Unified Search input and operator-help guidance text to improve screen-reader discoverability for query syntax and keyboard behavior. (Delivered in Global Cycle 11, commit `f3e107b`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)
- [ ] P1: Add saved-search smoke roundtrip coverage (save, reload, rerun, verify persisted filter/sort/timeline/verbatim) under mock mode.
- [ ] P1: Add top-k parity regression tests proving UI ordering matches full export ordering under score ties and invalid timestamps.
- [ ] P1: Add deterministic fixture generator utility shared by smoke and perf harnesses to reduce data-shape drift.
- [ ] P2: Add stale-selection smoke assertions that exercise `Prune stale` recovery under cross-tab deletion simulation.
- [ ] P2: Add perf threshold guardrails for 10k Unified Search datasets with variance-tolerant med/p95 limits in CI.
- [ ] P2: Add Unified Search zero-results guidance card with one-click reset actions for operators/type/timeline/verbatim.
- [ ] P2: Add shareable Unified Search URL state (`q`, `type`, `sort`, `time`, `limit`, `verbatim`) with hydration-safe defaults.
- [ ] P2: Add explicit malformed-write diagnostics panel in Library data tools for recent localStorage write failures.
- [ ] P3: Refactor shared `signal-*` storage keys into one constants module and migrate all surfaces to it.
- [ ] P3: Add NDJSON malformed-line integration check script for `/api/answer/stream` framing resilience.
- [ ] P3: Add focused tests for notes payload sanitation used by Unified Search preload/read-refresh paths.
- [ ] P3: Add JSON artifact output mode for `scripts/search-perf.mjs` to support historical trend diffing.
- [ ] P3: Add small query-operator lint utility to detect unsupported operator combinations by result type in docs/examples.
- [ ] P3: Add smoke validation for diagnostics-mode count consistency (`loaded >= matched >= visible`) across all result types.
- [ ] P3: Add keyboard regression tests for cross-over behavior when suggestion list empties during Arrow navigation.
- [ ] P3: Add explicit CSV export parity tests for multiline citation URLs and escaped whitespace edge cases.
- [ ] P3: Add docs hardening pass to keep README terse and move deep operator workflows into `docs/unified-search-operators.md`.

### Global Cycle 10 (2026-02-11) Plan
- [x] P1 (Selected): Extract Unified Search input keyboard state machine into a dedicated hook/helper module, wire component usage, and add unit tests covering suggestion-vs-result precedence and `Esc` semantics. (Delivered in Global Cycle 10, commit `d3f7396`) (Score: impact=high effort=med strategic=high differentiation=low risk=low-med confidence=med-high)
- [x] P1 (Selected): Add `/search` diagnostics mode behind `?debug=1` with per-type dataset counts (`loaded`, `matched`, `visible`) and filtered-out reason buckets (`type scope`, `query/operator/time`, `result limit`) to speed operator troubleshooting. (Delivered in Global Cycle 10, commit `d3f7396`) (Score: impact=high effort=med strategic=high differentiation=med risk=low confidence=med)
- [x] P1 (Selected): Add strict schema decoding for `signal-space-tags-v1` in Unified Search preload/read-refresh paths to prevent malformed tag payloads from degrading relevance/tag filtering. (Delivered in Global Cycle 10, commit `d3f7396`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Add operator-summary chip canonicalization (`tag/is` dedupe + stable ordering) to avoid noisy repeated operator chips on long query strings. (Delivered in Global Cycle 10, commit `d3f7396`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)
- [ ] P2: Add fixture-backed smoke mode that seeds deterministic localStorage data and verifies `/search` renders non-empty sections under operator filters. (Score: impact=med-high effort=med-high strategic=high differentiation=med risk=med confidence=med)
- [ ] P2: Add saved-search smoke roundtrip in mock mode (save, reload, rerun) with persistence assertions. (Score: impact=med-high effort=med-high strategic=high differentiation=low risk=med confidence=med-low)
- [ ] P2: Add query-result parity tests proving top-k UI ordering matches full export ordering under tie scores + invalid timestamps. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low-med confidence=med)
- [ ] P2: Add strict localStorage write guards for Unified Search state keys with quota-aware user notice and fallback. (Score: impact=med effort=med strategic=high differentiation=low risk=med confidence=med)
- [ ] P2: Add deterministic local fixture generator utility for shared smoke/perf/test dataset construction to reduce drift. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low confidence=med)
- [ ] P2: Add smoke assertion coverage for stale-selection recovery (`Prune stale`) under simulated cross-tab thread deletion. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low confidence=med)
- [ ] P2: Add perf guardrail test thresholds for 10k Unified Search dataset medians in CI-like environments (with variance-tolerant bands). (Score: impact=med effort=med strategic=med-high differentiation=med risk=med confidence=low-med)
- [ ] P3: Add `aria-describedby`/help-id linkage for operator syntax guidance to improve screen-reader discoverability. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add explicit malformed `signal-space-tags-v1` merge tests covering mixed valid/invalid ids/tags. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add tiny NDJSON malformed-line integration script for `/api/answer/stream` framing regression checks. (Score: impact=low-med effort=med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Refactor Unified Search localStorage key constants into shared module to reduce cross-surface key drift risk. (Score: impact=low-med effort=low-med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add dead-code sweep for legacy saved-search key paths in Library and unify migration helpers. (Score: impact=low-med effort=med strategic=med differentiation=low risk=low-med confidence=med)
- [ ] P3: Add benchmark report JSON artifact output mode in `scripts/search-perf.mjs` for trend tracking across cycles. (Score: impact=low-med effort=low-med strategic=med differentiation=med risk=low confidence=med)

### Global Cycle 9 (2026-02-11) Plan
- [x] P1 (Selected): Add strict schema decoders for Unified Search `signal-collections-v1` and `signal-files-v1` preload paths, wire decode on initial/focus/storage reloads, and add malformed-payload regression tests. (Delivered in Global Cycle 9, commit `0b692a3`) (Score: impact=high effort=med strategic=high differentiation=low risk=low confidence=high)
- [ ] P1: Add fixture-backed browser smoke mode that seeds deterministic localStorage data and verifies `/search` renders non-empty sections for operator-filtered queries. (Score: impact=high effort=med-high strategic=high differentiation=med risk=med confidence=med)
- [ ] P1: Add `/search` diagnostics mode behind `?debug=1` that reports per-type match counts and filtered-out reason buckets for operator troubleshooting. (Score: impact=med-high effort=med strategic=high differentiation=med risk=low confidence=med)
- [ ] P1: Add saved-search smoke roundtrip in mock mode (save, reload, rerun, and operator persistence assertions). (Score: impact=med-high effort=med strategic=high differentiation=low risk=low confidence=med)
- [ ] P1: Add a `useUnifiedSearchKeyboard` hook extraction with unit coverage for suggestion/result precedence and escape semantics. (Score: impact=med-high effort=med strategic=high differentiation=low risk=low-med confidence=med)
- [ ] P2: Add query-result parity tests that prove top-k UI ordering matches full-export ordering under tie scores and invalid timestamp fallbacks. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low-med confidence=med)
- [ ] P2: Add operator-chip dedupe and canonical ordering in summaries to avoid noisy repeated chips on long operator chains. (Score: impact=med effort=low-med strategic=med differentiation=low risk=low confidence=med)
- [ ] P2: Add zero-results guidance card with one-click resets for query operators, filter type, timeline, and verbatim toggle. (Score: impact=med effort=med strategic=med differentiation=med risk=low confidence=med)
- [ ] P2: Add smoke assertion coverage for stale selection recovery (`Prune stale`) across cross-tab mutation simulation. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low confidence=med)
- [ ] P2: Add Unified Search perf guardrail test that fails if 10k dataset median exceeds an agreed threshold band in CI-like environments. (Score: impact=med effort=med strategic=med-high differentiation=med risk=med confidence=low-med)
- [ ] P2: Add strict schema decoding for `signal-space-tags-v1` in Unified Search to prevent non-string tags from degrading relevance/tag operators. (Score: impact=med effort=low-med strategic=high differentiation=low risk=low confidence=med-high)
- [ ] P2: Add optional snippet copy action for thread/file cards in Unified Search with keyboard shortcut and toast feedback. (Score: impact=low-med effort=low-med strategic=med differentiation=med risk=low confidence=med)
- [ ] P2: Add resilient localStorage write guard for Unified Search state keys with quota-aware fallback notice instead of silent failure. (Score: impact=med effort=med strategic=high differentiation=low risk=med confidence=med)
- [ ] P2: Add deterministic local fixture generator utility for Unified Search datasets reused by smoke/perf/tests to reduce drift. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low confidence=med)
- [ ] P3: Add `aria-describedby` helper text link for operator syntax guidance and examples for improved screen-reader discoverability. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add explicit guard tests for malformed `signal-space-tags-v1` payload merge with valid tags. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add a quick NDJSON malformed-line integration script for `/api/answer/stream` response framing resilience checks. (Score: impact=low-med effort=med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Refactor Unified Search localStorage key constants into a shared module to reduce cross-surface key drift risk. (Score: impact=low-med effort=low-med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add dead-code sweep for legacy saved-search key paths in Library and unify migration helpers. (Score: impact=low-med effort=med strategic=med differentiation=low risk=low-med confidence=med)
- [ ] P3: Add lightweight benchmark report artifact export (`json`) from `scripts/search-perf.mjs` for trend tracking across cycles. (Score: impact=low-med effort=low-med strategic=med differentiation=med risk=low confidence=med)

### Cycle 8 (2026-02-11) Plan
- [x] P1 (Selected): Add a runnable Unified Search benchmark harness (`scripts/search-perf.mjs` + `tests/search-perf.bench.ts`) that profiles 1k/5k/10k mixed datasets and reports median/p95 filter+sort timings. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=high effort=med strategic=high differentiation=med risk=low confidence=high)
- [x] P1 (Selected): Harden recent-query persistence for `signal-unified-recent-v1` with decode-time schema validation, trim/length guards, dedupe, and deterministic capping so malformed localStorage cannot break `/search` controls. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Expand `resolveThreadSpaceMeta` regression coverage for stale/unknown/whitespace ids to lock safe null-fallback behavior during bulk/thread assignment. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Document Unified Search export semantics and keyboard precedence (`docs/unified-search-operators.md`) to align behavior docs with current implementation. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P2: Add fixture-backed smoke mode that seeds deterministic localStorage data and verifies `/search` renders non-empty sections under operator filters. (Score: impact=med-high effort=med-high strategic=high differentiation=low risk=low-med confidence=med)
- [ ] P2: Extract keyboard handling into `useUnifiedSearchKeyboard` hook to reduce `unified-search.tsx` complexity and future regression surface. (Score: impact=med effort=med strategic=high differentiation=low risk=low-med confidence=med)
- [ ] P2: Add compact `/search` debug diagnostics (counts by type + filtered-out reason summary) behind a query-param flag. (Score: impact=med effort=med strategic=med differentiation=med risk=low confidence=med)
- [ ] P2: Add query-result parity tests ensuring top-k display ordering always matches full-export ordering for ties and mixed timestamp fallbacks. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low-med confidence=med)
- [x] P2: Add strict schema decoding for collections/files preload payloads to match threads/spaces/tasks corruption resilience. (Delivered in Global Cycle 9, commit `0b692a3`) (Score: impact=med effort=med strategic=high differentiation=low risk=low-med confidence=med)
- [ ] P2: Add local smoke assertion for saved-search persistence roundtrip (save, reload, rerun) in mock workflow. (Score: impact=med effort=med strategic=med-high differentiation=low risk=low confidence=med)
- [ ] P3: Add zero-results operator-empty state copy with one-click clear actions for parsed operators and UI filters. (Score: impact=low-med effort=med strategic=med differentiation=med risk=low confidence=med)
- [ ] P3: Add quick local integration check script for `/api/answer/stream` that validates NDJSON framing against a malformed-event fixture. (Score: impact=low-med effort=med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add a tiny `safeLower()` utility for repeated lowercasing in prep paths and enforce usage via tests for non-string inputs. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add operator-chip dedupe and stable ordering for repeated operators to reduce noisy summaries on heavy query strings. (Score: impact=low-med effort=low-med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add optional copy-to-clipboard action for result-card snippets to speed postmortem/report workflows. (Score: impact=low effort=low-med strategic=low-med differentiation=med risk=low confidence=med)

### Cycle 7 (2026-02-11) Plan
- [x] P1 (Selected): Add strict-but-lossless localStorage schema guards for Unified Search thread preload (`signal-history-v2`) so malformed entries cannot crash render paths (`citations.map`, `tags.map`, string lowercasing). (Delivered in Cycle 7, commit `7cbe4d6`) (Score: impact=high effort=med strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Add localStorage schema guards for Unified Search space/task preload (`signal-spaces-v1`, `signal-tasks-v1`) with safe coercion/defaults and malformed-record pruning. (Delivered in Cycle 7, commit `7cbe4d6`) (Score: impact=high effort=med strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Add regression tests for malformed preload payloads (threads/spaces/tasks) to prove crash-resistant decode behavior and preserve valid entries. (Delivered in Cycle 7, commit `7cbe4d6`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Extend timeline regression coverage with DST-offset and mixed invalid timestamp cases for bounded windows (`24h`/`7d`), ensuring absolute-ms semantics stay stable. (Delivered in Cycle 7, commit `7cbe4d6`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)
- [ ] P2: Add fixture-backed smoke mode that seeds deterministic localStorage data and verifies `/search` renders non-empty sections under operator filters. (Score: impact=med effort=med strategic=high differentiation=low risk=low-med confidence=med)
- [x] P2: Add search benchmark harness (`scripts/search-perf.mjs`) for 1k/5k/10k mixed entries and capture baseline timings in docs. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med)
- [ ] P2: Extract keyboard handling into `useUnifiedSearchKeyboard` hook to reduce `unified-search.tsx` complexity and future regression surface. (Score: impact=med effort=med strategic=high differentiation=low risk=low-med confidence=med)
- [ ] P2: Add compact `/search` debug diagnostics (counts by type + filtered-out reason summary) behind a query-param flag. (Score: impact=med effort=med strategic=med differentiation=med risk=low confidence=med)
- [x] P2: Add explicit guard tests for `resolveThreadSpaceMeta` when selected space ids are missing/archived/stale. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add zero-results operator-empty state copy with one-click clear actions for parsed operators and UI filters. (Score: impact=low-med effort=med strategic=med differentiation=med risk=low confidence=med)
- [x] P3: Document Unified Search export semantics (all-results export vs UI limit, deterministic timestamps, environment metadata) in docs. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [x] P3: Document keyboard precedence matrix (operator suggestions vs result navigation) and `Esc` behavior in `docs/unified-search-operators.md`. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add quick local integration check script for `/api/answer/stream` that validates NDJSON framing against a malformed-event fixture. (Score: impact=low-med effort=med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add a tiny `safeLower()` utility for repeated lowercasing in prep paths and enforce usage via tests for non-string inputs. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=med)
- [x] P3: Add stale recent-query dedupe/normalization guardrails when loading `signal-unified-recent-v1`. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)

### Cycle 6 (2026-02-11) Plan
- [x] P1 (Selected): Extract Unified Search export builders into pure helpers (`buildUnifiedSearchMarkdownExport`, `buildUnifiedSearchSavedSearchesMarkdownExport`, `buildUnifiedSearchCsvExport`) to reduce `unified-search.tsx` complexity and make export behavior easier to regression test. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=high effort=med strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Harden Unified Search CSV export with a shared `escapeCsvCell` helper that safely handles commas/newlines/quotes across thread/space/collection/file/task records, with deterministic regression tests. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Add accessibility pass for Unified Search action controls: explicit `aria-label`s for bulk/saved-search actions and `aria-live` status announcements for toast feedback. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=med-high effort=low-med strategic=high differentiation=med risk=low confidence=high)
- [x] P2 (Selected): Extend workflow-policy tests to enforce `smoke.yml` includes an `npm run smoke:mock` step so smoke coverage cannot silently drift in CI workflow edits. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)
- [x] P2: Add localStorage schema guards for malformed Unified Search preload payloads (threads/spaces/tasks) to prevent runtime crashes from invalid cached data. (Delivered in Cycle 7, commit `7cbe4d6`)
- [ ] P2: Add fixture-backed smoke mode for `/search` that preloads deterministic localStorage data and asserts non-empty filtered sections.
- [x] P2: Add timeline-window edge-case tests around daylight-saving transitions and mixed invalid timestamps. (Delivered in Cycle 7, commit `7cbe4d6`)
- [x] P2: Add benchmark harness (`scripts/search-perf.mjs`) for 1k/5k/10k mixed entries and document baseline timings. (Delivered in Cycle 8, commit `fbdbcbb`)
- [ ] P2: Extract keyboard handling into `useUnifiedSearchKeyboard` hook to lower maintenance risk in `unified-search.tsx`.
- [ ] P2: Add compact debug diagnostics on `/search` (type counts + filtered-out reasons) behind a query-param flag.
- [ ] P3: Add explicit empty-state copy for operator-filtered zero-results with one-click clear actions.
- [x] P3: Add docs section for export semantics (all-results vs UI-limit, deterministic timestamps, environment metadata). (Delivered in Cycle 8, commit `fbdbcbb`)
- [x] P3: Add docs for keyboard precedence (operator suggestions vs result navigation) and escape behavior matrix. (Delivered in Cycle 8, commit `fbdbcbb`)
- [ ] P3: Add explicit `aria-describedby` guidance text for operator syntax examples to improve screen-reader discoverability.
- [x] P3: Add unit tests for `resolveThreadSpaceMeta` when selected space ids are missing/archived to preserve safe fallback semantics. (Delivered in Cycle 8, commit `fbdbcbb`)

### Cycle 5 (2026-02-11) Plan
- [x] P1 (Selected): Add Unified Search export metadata block with explicit locale/timezone/UTC offset for markdown exports (results + saved searches) so exported artifacts are reproducible across machines and review workflows. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=high effort=low strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Add a visible `Prune stale selection` recovery action in Unified Search bulk toolbar when selected thread ids no longer exist (cross-tab deletes/updates), with precise stale-count feedback. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=high effort=low-med strategic=high differentiation=med risk=low confidence=high)
- [x] P1 (Selected): Add operator parser stress tests covering long/duplicate/quoted/unbalanced operator-heavy inputs to prevent regressions as query grammar grows. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=high effort=low strategic=high differentiation=low risk=low confidence=high)
- [x] P2: Add deterministic CSV export escaping tests (quotes/newlines/commas) for thread/space/file/task records and harden escaping helper reuse. (Delivered in Cycle 6, commit `3dd910e`)
- [x] P2: Add benchmark harness (`scripts/search-perf.mjs`) for 1k/5k/10k mixed entries and track baseline timings in docs. (Delivered in Cycle 8, commit `fbdbcbb`)
- [x] P2: Add timeline-window edge-case tests around daylight-saving transitions and mixed invalid timestamps. (Delivered in Cycle 7, commit `7cbe4d6`)
- [x] P2: Add explicit `aria-label`/`aria-live` improvements for Unified Search bulk actions, saved-search controls, and toast announcements. (Delivered in Cycle 6, commit `3dd910e`)
- [ ] P2: Extract keyboard handling to `useUnifiedSearchKeyboard` hook to reduce complexity in `unified-search.tsx`.
- [x] P2: Add localStorage schema guard tests for malformed space/task/thread payloads consumed by Unified Search preload paths. (Delivered in Cycle 7, commit `7cbe4d6`)
- [ ] P2: Add smoke preloaded-data fixture mode to assert `/search` renders non-empty filtered sections deterministically.
- [ ] P2: Add compact diagnostics panel on `/search` (counts by type + filtered-out reason summary) behind a debug flag.
- [x] P2: Add export helper extraction (`buildUnifiedSearchMarkdownExport` + `buildUnifiedSearchCsvExport`) for better testability and reuse. (Delivered in Cycle 6, commit `3dd910e`)
- [x] P3: Add docs section for export semantics (all-results vs UI-limit, timestamp+environment metadata, invalid-date fallback). (Delivered in Cycle 8, commit `fbdbcbb`)
- [x] P3: Add docs for keyboard-navigation precedence (operator suggestions vs result rows) and escape behavior matrix. (Delivered in Cycle 8, commit `fbdbcbb`)
- [x] P3: Add workflow policy assertion ensuring `smoke.yml` remains present and invokes `npm run smoke:mock`. (Delivered in Cycle 6, commit `3dd910e`)
- [ ] P3: Add explicit empty-state copy for operator-filtered zero-results with one-click clear actions for operators and filters.

### Cycle 4 (2026-02-11) Plan
- [x] P1 (Selected): Add deterministic Unified Search export timestamp formatting (`ISO-8601 + locale secondary`) for markdown exports (results + saved searches) so exported evidence is unambiguous across locales. (Delivered in Cycle 4, commit `72c24d7`) (Score: impact=high effort=low strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Add invalid/missing timestamp guardrails for Unified Search date rendering/export paths (`createdAt`/`addedAt`/`nextRun`/`updatedAt`) and lock behavior with unit tests to prevent `Invalid Date` output and unstable sorting fallbacks. (Delivered in Cycle 4, commit `72c24d7`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P1 (Selected): Extend smoke coverage with an operator-heavy `/search` request path assertion (encoded `type:/is:/has:/tag:` query) to keep search-route behavior guarded in mock-mode smoke checks. (Delivered in Cycle 4, commit `72c24d7`) (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P2: Add export metadata block for timezone offset + environment locale to improve reproducibility when comparing exports from multiple machines. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)
- [x] P2: Add explicit `aria-label`/`aria-live` improvements for Unified Search bulk actions, saved-search controls, and toast announcements. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=med effort=med strategic=med differentiation=low risk=low confidence=med)
- [x] P2: Add stale-selection recovery action (`Prune stale selection`) in Unified Search bulk toolbar when hidden/invalid ids are detected. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=med effort=low-med strategic=med differentiation=med risk=low confidence=med)
- [x] P2: Add deterministic CSV export escaping tests (quotes/newlines/commas) for thread/space/file/task records. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=med effort=med strategic=med differentiation=low risk=low confidence=med)
- [x] P2: Add benchmark harness (`scripts/search-perf.mjs`) for 1k/5k/10k mixed entries and track baseline timings in docs. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med)
- [x] P2: Add timeline-window edge-case tests around daylight-saving transitions and mixed invalid timestamps. (Delivered in Cycle 7, commit `7cbe4d6`) (Score: impact=med effort=low-med strategic=med-high differentiation=low risk=low confidence=med-high)
- [x] P2: Add query-token stress tests (long/duplicate/quoted/unbalanced operator-heavy inputs) to prevent parser regressions. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=med effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [ ] P2: Add a small `useUnifiedSearchKeyboard` hook extraction to reduce complexity in `unified-search.tsx` navigation/autocomplete key handling. (Score: impact=med effort=med strategic=high differentiation=low risk=low-med confidence=med)
- [x] P2: Add localStorage schema guard tests for malformed space/task/thread payloads consumed by Unified Search preload paths. (Delivered in Cycle 7, commit `7cbe4d6`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med)
- [ ] P3: Add smoke preloaded data fixture mode to assert `/search` renders non-empty filtered sections deterministically. (Score: impact=low-med effort=med strategic=med-high differentiation=low risk=low-med confidence=med)
- [ ] P3: Add a compact diagnostics panel on `/search` (counts by type + filtered-out reason summary) behind a debug flag. (Score: impact=low-med effort=med strategic=med differentiation=med risk=low confidence=med)
- [x] P3: Add docs page section for export semantics (all-results vs UI-limit, timestamp format, invalid-date fallback). (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [x] P3: Add docs for keyboard navigation precedence (suggestions vs result rows) and escape behavior matrix. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [x] P3: Add workflow policy assertion ensuring `smoke.yml` remains present and invokes `npm run smoke:mock`. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=low-med effort=low-med strategic=med differentiation=low risk=low confidence=med)
- [x] P3: Add unit tests for `resolveThreadSpaceMeta` behavior when selected space id no longer exists. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add explicit empty-state copy for operator-filtered zero-results with one-click clear for operators and filter controls. (Score: impact=low-med effort=med strategic=med differentiation=med risk=low confidence=med)
- [x] P3: Refactor export builders into pure helpers (`buildUnifiedSearchMarkdownExport`, `buildUnifiedSearchCsvExport`) for testability and reuse. (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=low-med effort=med-high strategic=high differentiation=low risk=med confidence=med)

### Cycle 3 (2026-02-11) Plan
- [x] P1 (Selected): Add Unified Search keyboard result navigation (`ArrowUp/ArrowDown/Enter`) with deterministic section traversal (threads -> spaces -> collections), active-row styling, and focus-safe behavior in the main query input. (Score: impact=high effort=med strategic=high differentiation=med risk=low-med confidence=med-high)
- [x] P1 (Selected): Add inline operator autocomplete suggestions (`type:`, `space:`, `spaceId:`, `tag:`, `-tag:`, `has:`, `-has:`, `is:`, `-is:`, `verbatim:`) with keyboard acceptance (`Enter`/`Tab`) and `Esc` dismiss semantics. (Score: impact=high effort=med strategic=high differentiation=med risk=low-med confidence=med-high)
- [x] P1 (Selected): Expand Unified Search regression coverage for operator combinations and autocomplete helper logic to prevent parser/filter drift. (Score: impact=high effort=low-med strategic=high differentiation=low risk=low confidence=high)
- [x] P2: Add deterministic export timestamp formatting (ISO primary + locale secondary) across Unified Search exports to avoid ambiguous cross-locale dates. (Delivered in Cycle 4, commit `72c24d7`) (Score: impact=med effort=low strategic=med differentiation=low risk=low confidence=high)
- [x] P2: Add guardrails for invalid/missing `createdAt`/`nextRun` values in export/sort rendering paths and lock with unit tests. (Delivered in Cycle 4, commit `72c24d7`) (Score: impact=med effort=low-med strategic=med-high differentiation=low risk=low confidence=high)
- [x] P2: Extend smoke coverage with an operator-heavy query path assertion for `/search` behavior under mock mode fixtures. (Delivered in Cycle 4, commit `72c24d7`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med)
- [x] P2: Add a lightweight search benchmark harness (`scripts/search-perf.mjs`) for 1k/5k/10k mixed entries and document baseline timings. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med)
- [ ] P2: Add explicit aria labels and keyboard hints for Unified Search bulk controls and saved-search actions. (Score: impact=med effort=med strategic=med differentiation=low risk=low confidence=med)
- [x] P2: Add stale-selection recovery affordance (`Prune stale selection`) when cross-tab updates invalidate selected thread ids. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=med effort=low-med strategic=med differentiation=med risk=low confidence=med)
- [ ] P3: Refactor `src/components/unified-search.tsx` into smaller modules (result rendering, export helpers, keyboard UX hooks) to reduce maintenance risk. (Score: impact=med effort=high strategic=high differentiation=low risk=med confidence=med)
- [ ] P3: Add optional local debug telemetry for parse/filter/sort timings behind a query param or debug flag. (Score: impact=low-med effort=med strategic=med differentiation=med risk=low confidence=med)
- [ ] P3: Add docs for Unified Search keyboard shortcuts and operator autocomplete behavior. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [x] P3: Add CI guard to ensure `npm run smoke:mock` remains runnable in workflow changes (cheap smoke command policy check). (Delivered in Cycle 6, commit `3dd910e`) (Score: impact=low-med effort=low-med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add keyset consistency tests for localStorage keys used by Unified Search reload listeners to prevent missed cross-tab updates. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)

### Cycle 2 (2026-02-11) Plan
- [x] P1 (Selected): Add Unified Search `is:` / `-is:` operators for thread state filters (`favorite|pinned|archived`) with parser support, filter logic, and inline help/chips updates. (Score: impact=high effort=med strategic=high differentiation=med risk=low confidence=high)
- [x] P1 (Selected): Harden Unified Search saved-search persistence with schema-versioned validation/migration so malformed legacy payloads cannot break preset UX. (Score: impact=high effort=med strategic=high differentiation=low risk=low confidence=high)
- [x] P2 (Selected): Publish operator reference matrix (`docs/unified-search-operators.md`) and align README/docs links so operator scope is explicit by result type. (Score: impact=med effort=low strategic=high differentiation=low risk=low confidence=high)
- [x] P2: Add keyboard navigation for Unified Search results (`ArrowUp/ArrowDown/Enter`) with active-row focus semantics and deterministic section traversal. (Delivered in Cycle 3, commit `6e36936`) (Score: impact=med effort=med strategic=med-high differentiation=med risk=low-med confidence=med)
- [x] P2: Add inline operator autocomplete suggestions (`type:`, `is:`, `has:`, `tag:`, `space:`) with keyboard acceptance and escape-to-dismiss. (Delivered in Cycle 3, commit `6e36936`) (Score: impact=med effort=med-high strategic=med-high differentiation=med risk=med confidence=med)
- [x] P2: Add a lightweight search benchmark harness (`scripts/search-perf.mjs`) for 1k/5k/10k mixed entries and track baseline metrics in docs. (Delivered in Cycle 8, commit `fbdbcbb`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med-high)
- [x] P2: Expand operator-combination regression coverage (`space + tag`, `spaceId + -has:*`, `type:* + is:*`) to prevent parser/filter drift. (Delivered in Cycle 3, commit `6e36936`) (Score: impact=med effort=low strategic=high differentiation=low risk=low confidence=high)
- [x] P2: Add stale-selection UX recovery action (“prune stale selection”) when cross-tab updates invalidate selected thread ids. (Delivered in Cycle 5, commit `3b7d78e`) (Score: impact=med effort=low-med strategic=med differentiation=med risk=low confidence=med)
- [ ] P3: Add accessibility pass for Unified Search actions (explicit labels/aria on bulk controls, saved-search actions, and operator scope hint). (Score: impact=med effort=med strategic=med differentiation=low risk=low confidence=med)
- [ ] P3: Add deterministic export timestamp formatting (ISO + locale fallback) to avoid ambiguous date rendering across environments. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add guardrails for invalid/missing `createdAt` fields in export/sort paths with targeted tests. (Score: impact=low-med effort=low strategic=med differentiation=low risk=low confidence=high)
- [ ] P3: Add `/search` smoke assertion for an operator query path and non-empty fixture result behavior (mocked local storage preload). (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med)
- [ ] P3: Add nightly `smoke.yml` schedule on `main` with fail-fast and artifact retention for diagnostics. (Score: impact=med effort=low-med strategic=med-high differentiation=low risk=low confidence=med)
- [ ] P3: Refactor `src/components/unified-search.tsx` into focused modules (prep/filter/sort/export/actions) to lower maintenance risk. (Score: impact=med effort=high strategic=high differentiation=low risk=med confidence=med)
- [ ] P3: Add minimal telemetry hooks for local performance timings (query parse/filter/sort durations) behind debug flag. (Score: impact=low-med effort=med strategic=med differentiation=med risk=low confidence=med)

### Cycle 1 (2026-02-11) Plan
- [x] P1 (Selected): Unified Search operator-scope correctness: prevent `has:`/`-has:`/`tag:`/`-tag:`/`space:` operators from leaking unrelated result types in all-mode results (collections/files/tasks), while keeping supported operator behavior per type explicit and consistent. (Score: impact=high effort=med strategic=high differentiation=med risk=low confidence=high)
- [x] P1 (Selected): Unified Search relevance performance: precompute lowered relevance fields per item and score from pre-lowered text to reduce per-keystroke allocations/lowercasing work on large local libraries. (Score: impact=high effort=med strategic=high differentiation=med risk=low confidence=high)
- [x] P2 (Selected): Regression tests for operator scope + scorer parity (`computeRelevanceScore` vs lowered scorer) across spaces/tasks/collections/files. (Score: impact=med effort=low strategic=high differentiation=low risk=low confidence=high)
- [x] P2: Add `is:` / `-is:` thread-state operators (`favorite|pinned|archived`) with UI help and tests. (Delivered in Cycle 2, commit `8041e0f`) (Score: impact=med-high effort=med strategic=high differentiation=med risk=low confidence=med-high)
- [x] P2: Add schema-versioned migration for Unified Search saved searches (`signal-unified-saved-v1`) to harden against malformed/legacy entries. (Delivered in Cycle 2, commit `8041e0f`) (Score: impact=med effort=med strategic=high differentiation=low risk=low confidence=med-high)
- [x] P3: Add docs page `docs/unified-search-operators.md` with an operator-by-result-type matrix and examples. (Delivered in Cycle 2, commit `8041e0f`) (Score: impact=med effort=low strategic=med-high differentiation=low risk=low confidence=high)

### Cycle 10 (2026-02-10) Plan
- [x] P2: Unified Search UI performance: avoid full sorting of large result sets on every keystroke by selecting top `max(resultLimit, 3)` items per section (heap top-k), and compute full ordering only on explicit export actions. (Score: impact=med-high effort=med risk=low-med confidence=high)
- [x] P3: Tests: add unit coverage that top-k selection matches `sortSearchResults(...).slice(0,k)` across sort modes (relevance/newest/oldest), including tie-break semantics. (Score: impact=med effort=low risk=low confidence=high)
- [x] P3: Smoke: extend `npm run smoke:mock` to verify `/search` renders (Unified Search page) in addition to `/`. (Score: impact=med effort=low risk=low confidence=high)
- [x] P4: Unified Search export UX: clarify in export header text that exports include all matches (not limited by UI result limit). (Score: impact=low effort=low risk=low confidence=high)

### Cycle 9 (2026-02-10) Plan
- [x] P3: Unified Search operators help: add one or two copy-ready examples (threads/spaces/files) and clarify that `space:` matches name-contains OR exact space id. (Score: impact=low-med effort=low risk=low confidence=high)
- [x] P3: Tests: add more coverage for cross-type operators and timeline+sort interactions (threads/spaces/files/tasks). (Score: impact=low effort=low risk=low confidence=high)
- [x] P4: Unified Search performance: consider top-k selection (avoid full sort) for very large result sets when resultLimit is small. (Delivered in Cycle 10) (Score: impact=med effort=med risk=med confidence=med)

## Implemented
- 2026-02-11: Unified Search saved-search roundtrip and ordering parity hardening: added a dedicated smoke fixture route (`/smoke-search/saved-roundtrip`) that verifies persisted saved-search rerun state (query/filter/sort/timeline/result limit/verbatim), expanded smoke-fixture tests for roundtrip bootstrap semantics, surfaced `verbatim:true|false` in saved-search cards for faster scanability, and added deterministic tie-order parity guards so heap top-k ordering matches full sort ordering even when `createdMs` uses invalid-date fallback values (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `src/lib/unified-search-bootstrap.ts`, `src/lib/unified-search-smoke-fixture.ts`, `src/app/smoke-search/saved-roundtrip/page.tsx`, `scripts/smoke.mjs`, `tests/unified-search.test.ts`, `tests/unified-search-smoke-fixture.test.ts`). (commit `a45d4c1`)
- 2026-02-11: Unified Search smoke/reliability/accessibility hardening: added a fixture-backed smoke route (`/smoke-search`, gated by `SMOKE_ENABLE_SEARCH_FIXTURE=1`) and smoke assertions for operator-filtered seeded results, introduced `writeStoredJson()` guardrails with quota/failure handling for Unified Search persistence writes, added `aria-describedby` linkage from search input to operator guidance, and added regression tests for storage writes + smoke fixture query filtering (`scripts/smoke.mjs`, `src/app/smoke-search/page.tsx`, `src/components/unified-search.tsx`, `src/lib/storage.ts`, `src/lib/unified-search-bootstrap.ts`, `src/lib/unified-search-smoke-fixture.ts`, `tests/storage.test.ts`, `tests/unified-search-smoke-fixture.test.ts`). (commit `f3e107b`)
- 2026-02-11: Unified Search diagnostics + keyboard maintainability pass: extracted input keyboard precedence into `useUnifiedSearchKeyboard` with dedicated regression tests, added `/search?debug=1` diagnostics cards (loaded/matched/visible + filtered-out reason buckets), added strict `signal-space-tags-v1` decode guards in preload/focus refresh paths, and canonicalized operator-summary chips to dedupe repeated `tag:`/`is:` operators (`src/lib/unified-search-keyboard.ts`, `src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `tests/unified-search-keyboard.test.ts`, `tests/unified-search.test.ts`, `docs/unified-search-operators.md`, `README.md`, `CHANGELOG.md`). (commit `d3f7396`)
- 2026-02-11: Unified Search preload corruption hardening now includes collections/files: added strict decode guards for `signal-collections-v1` and `signal-files-v1` with safe defaults + malformed-entry pruning, wired `/search` initial/focus/storage reloads through the new decoders, and added malformed payload regression tests (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`, `CHANGELOG.md`). (commit `0b692a3`)
- 2026-02-11: Unified Search reliability + perf instrumentation pass: added guarded decode/normalization for recent-query storage (`signal-unified-recent-v1`) with trim/dedupe/cap semantics, expanded `resolveThreadSpaceMeta` regression coverage for stale/whitespace ids, added a runnable benchmark harness (`scripts/search-perf.mjs` + `tests/search-perf.bench.ts`) with 1k/5k/10k baseline timings, and documented export semantics + keyboard precedence in operator docs (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`, `tests/search-perf.bench.ts`, `scripts/search-perf.mjs`, `vitest.perf.config.ts`, `docs/search-performance.md`, `docs/unified-search-operators.md`, `README.md`, `package.json`). (commit `fbdbcbb`)
- 2026-02-11: Unified Search preload reliability hardening: added typed localStorage decode guards for threads/spaces/tasks with safe defaults and malformed-entry pruning, wired `/search` preload/focus refresh paths through those decoders, and added regression tests for malformed payloads plus DST-offset timeline window behavior (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`). (commit `7cbe4d6`)
- 2026-02-11: Unified Search export reliability and accessibility hardening: extracted markdown/saved-search/CSV export builders into pure helpers, added deterministic full-cell CSV escaping (`quotes/newlines/commas`) with regression coverage, added explicit `aria-label`s + toast `aria-live` announcements for key Unified Search actions, and extended workflow-policy checks/tests so `smoke.yml` must run `npm run smoke:mock` (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`, `scripts/workflow-policy.mjs`, `tests/workflow-policy.test.ts`, `CHANGELOG.md`). (commit `3dd910e`)
- 2026-02-11: Unified Search reproducibility + selection resilience pass: added export environment metadata (`locale`, `timeZone`, `utcOffset`) for markdown exports (results + saved searches), added visible `Prune stale` bulk action recovery when selected thread ids are no longer present, and expanded operator parser regression coverage with long/duplicate/quoted/unbalanced operator-heavy inputs (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`, `README.md`, `CHANGELOG.md`). (commit `3b7d78e`)
- 2026-02-11: Unified Search export/date reliability pass: added deterministic timestamp formatting (`ISO-8601 + locale`) with invalid-date fallback helpers, replaced brittle `new Date(...).toLocaleString()` export/render paths for collections/tasks/saved searches, and extended mock smoke coverage with an operator-heavy `/search` query path assertion; added regression tests for timestamp parse/format helpers (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`, `scripts/smoke.mjs`, `README.md`, `CHANGELOG.md`). (commit `72c24d7`)
- 2026-02-11: Unified Search keyboard UX + operator autocomplete: added deterministic keyboard traversal for openable result cards (threads/spaces/collections) with active-row highlighting and Enter-to-open behavior, added operator autocomplete helpers + suggestion chips (`type/space/spaceId/tag/-tag/is/-is/has/-has/verbatim`) with Enter/Tab apply and Esc dismiss, and expanded regression tests for autocomplete + operator combinations (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `tests/unified-search.test.ts`, `README.md`). (commit `6e36936`)
- 2026-02-11: Unified Search state-operator + persistence hardening pass: added `is:` / `-is:` thread-state operators (`favorite|pinned|archived`) with parser/filter support and strict type-scope handling, introduced versioned saved-search storage encoding/decoding with legacy-array migration + validation, and added an operator scope matrix doc with README linkage (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `src/lib/saved-searches.ts`, `tests/unified-search.test.ts`, `tests/saved-searches.test.ts`, `docs/unified-search-operators.md`, `README.md`). (commit `8041e0f`)
- 2026-02-11: Unified Search operator-scope hardening + relevance optimization: added type-specific operator filtering for spaces/tasks/collections/files (prevents unsupported-operator leakage in mixed results), introduced `computeRelevanceScoreFromLowered()` with per-entry pre-lowered relevance fields, updated inline operator scope guidance, and expanded regression coverage (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`). (commit `57bf944`)
- 2026-02-10: Unified Search UI perf: select top-k results per section (heap) for display instead of sorting full result sets on each query update; compute full ordering only on export. Added unit tests for parity with full sort slice and extended smoke to assert `/search` renders (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`, `scripts/smoke.mjs`). (commit `ff0e16d`)
- 2026-02-10: Unified Search cleanup: extracted pure filtering/sorting helpers into `src/lib/unified-search.ts`, used them in the UI, and added unit tests for cross-type operator behavior plus relevance/newest sort fallback semantics (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`). (commit `793f3e5`)
- 2026-02-10: Unified Search cross-tab consistency: reload saved searches on focus/storage refresh and include `signal-unified-saved-v1` in the storage-event key allowlist; updated inline operator help to document `space:` and `verbatim:false` (`src/components/unified-search.tsx`). (commit `5f82826`)
- 2026-02-10: Unified Search performance pass: precompute per-item lowercased combined search text + tag sets and reuse them for filtering; skip relevance scoring work when query is empty or sort is by time; added `matchesLoweredText()` helper + regression tests (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `tests/unified-search.test.ts`). (commit `8627eef`)
- 2026-02-10: Unified Search export: include saved searches in Markdown export and add a dedicated "Export" button for saved searches (`src/components/unified-search.tsx`). (commit `828639e`)
- 2026-02-10: Unified Search saved searches (presets): save current query + filters (type/sort/time/limit) into `signal-unified-saved-v1`, with pin/rename/run/delete UI (`src/components/unified-search.tsx`, `src/lib/saved-searches.ts`, `tests/saved-searches.test.ts`). (commit `9bcfc13`)
- 2026-02-10: Unified Search negative operators + parsing hardening: `-tag:` and `-has:` support, new `spaceId:` exact operator, safer tokenization for unbalanced quotes + escaped quotes, and regression tests (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`). (commit `1d2a19a`)
- 2026-02-10: Unified Search now indexes Space tags (`signal-space-tags-v1`), supports `tag:` operator filtering for Spaces, and boosts relevance when the free-text query matches tags (`src/components/unified-search.tsx`, `tests/unified-search.test.ts`). (commit `285d9c8`)
- 2026-02-10: Unified Search verbatim toggle + `verbatim:true|false` operator for phrase-only matching (no token fallback), persisted via `signal-unified-verbatim-v1`, and included in saved-search presets (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `src/lib/saved-searches.ts`, `tests/unified-search.test.ts`, `tests/saved-searches.test.ts`). (commit `dbe007a`)
- 2026-02-10: Unified Search “why this matched” micro-badges on result cards (Title/Tags/Space/Note/Citations/Answer) to improve trust + scanability without changing ranking (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `tests/unified-search.test.ts`) (commit `e64f5ae`).
- 2026-02-10: Cross-surface search shortcuts in Library/Spaces/Collections (consistent `/` focus + `Esc` clear) (`src/components/chat-app.tsx`, `src/components/spaces-view.tsx`, `src/components/collections-view.tsx`) (commit `a9ed305`).
- 2026-02-10: Unified Search query operators (`type:`, `space:`, `tag:`, `has:`) with inline help, operator chips, and a "clear operators" affordance (`src/lib/unified-search.ts`, `src/components/unified-search.tsx`, `tests/unified-search.test.ts`) (commit `d1c8aab`).
- 2026-02-10: Unified Search now supports multi-word matching (phrase OR all-tokens across fields), field-weighted relevance scoring (title/question > tags/space > notes/citations > body) with precomputed scores, plus `/` focus + `Esc` clear + `Enter` commit recent query and deferred query evaluation (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `tests/unified-search.test.ts`) (commit `590f05c`).
- 2026-02-10: Added unified search match highlighting for query/tokens across titles + snippets (`src/components/unified-search.tsx`, `src/lib/highlight.ts`) (commit `ce3429c`).
- 2026-02-09: Added repo maintainer contract + memory tracking files (`AGENTS.md`, `PROJECT_MEMORY.md`, `INCIDENTS.md`) (commit `5a36bd8`).
- 2026-02-09: Enforced workflow policy checks (pinned action SHAs + explicit `permissions:`) via `npm run check:workflows` and CI step, with regression tests (`scripts/check-workflows.mjs`, `scripts/workflow-policy.mjs`, `tests/workflow-policy.test.ts`, `.github/workflows/ci.yml`) (commit `0a9bbdf`).
- 2026-02-09: Migrated SARIF upload to CodeQL action v4 (`.github/workflows/scorecard.yml`) (commit `0a9bbdf`).
- 2026-02-09: Added Undo affordance for Unified Search bulk thread actions (`src/components/unified-search.tsx`) (commit `0a9bbdf`).
- 2026-02-08: Hardened Actions workflows by pinning action SHAs and tightening token permissions in CI/Scorecard (`.github/workflows/ci.yml`, `.github/workflows/scorecard.yml`).
- 2026-02-08: Stabilized Release Please by removing invalid input and gating automation behind explicit enablement (`.github/workflows/release-please.yml`).
- 2026-02-08: Remediated moderate dependency advisories by upgrading the `vitest` toolchain to v4 (`package.json`, `package-lock.json`, `npm audit --json` now shows 0 vulnerabilities).
- 2026-02-08: Added Unified Search timeline filtering and in-place thread quick/bulk actions (favorite/pin/archive/space assignment) (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`).
- 2026-02-08: Added regression tests for timeline and bulk-action helper logic (`tests/unified-search.test.ts`).
- 2026-02-08: Expanded library + unified search relevance to include answer text, citations, and notes with contextual snippets (src/components/chat-app.tsx, src/components/unified-search.tsx).
- 2026-02-10: Unified Search bulk favorite/unfavorite actions (`src/components/unified-search.tsx`) (commit `2c94219`).
- 2026-02-10: Hardened Unified Search bulk selection against stale/missing thread ids and made bulk toolbar counts/toasts reflect active selection (`src/components/unified-search.tsx`, `src/lib/unified-search.ts`, `tests/unified-search.test.ts`) (commit `3a7dff9`).
- 2026-02-10: Local storage corruption backups on JSON parse failures + regression tests (`src/lib/storage.ts`, `src/lib/unified-search.ts`, `src/components/chat-app.tsx`, `src/components/spaces-view.tsx`, `src/components/collections-view.tsx`, `src/components/report-view.tsx`, `tests/storage.test.ts`) (commit `716763b`).
- 2026-02-10: Mock smoke verification path + on-demand CI workflow (`scripts/smoke.mjs`, `.github/workflows/smoke.yml`, `package.json`, `PROJECT.md`) (commit `fe19614`).
- 2026-02-10: Added integration-style tests for `/api/answer` and `/api/answer/stream` (mock provider), configurable mock stream delay, and stricter NDJSON smoke framing checks (`tests/api-answer.test.ts`, `tests/api-answer-stream.test.ts`, `src/app/api/answer/stream/route.ts`, `scripts/smoke.mjs`) (commit `f278cd6`).
- 2026-02-10: Added Library "Data tools" panel (export raw `signal-*` localStorage + export-gated reset) and a `signal-*` localStorage usage indicator (`src/components/chat-app.tsx`, `src/lib/signal-storage.ts`) (commit `e42bb68`).
- 2026-02-10: Documented local-first data export/reset and corruption recovery steps (`docs/data-recovery.md`, `README.md`) (commit `3fac87f`).
- 2026-02-10: Library bulk undo toast for archive/delete actions, with unit-tested restore logic that doesn't drop newly created threads (`src/components/chat-app.tsx`, `src/lib/library-undo.ts`, `tests/library-undo.test.ts`) (commit `661ff10`).
- 2026-02-10: Library data health warning (corrupt localStorage backups) + diagnostics bundle downloads (full + redacted) + docs updates (`src/components/chat-app.tsx`, `next.config.ts`, `docs/data-recovery.md`) (commit `50055b4`).
- 2026-02-10: Removed Next build warning from Node WebStorage by lazy-loading `docx` and tightening browser guards in localStorage helpers (`src/components/chat-app.tsx`, `src/lib/storage.ts`, `src/lib/signal-storage.ts`, `src/lib/local-data.ts`, `tests/storage.test.ts`) (commit `30a28ca`).

## Insights
- 2026-02-11 bounded market scan (untrusted): baseline UX in adjacent tools still emphasizes searchable history/workspaces plus explicit narrowing controls and keyboard-first retrieval; this supports prioritizing deterministic saved-search rerun behavior and verifiable local smoke evidence before broad surface expansion. Sources: https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 gap map refresh (untrusted, synthesized): missing = multi-user auth/db/retrieval jobs; weak = URL-shareable query state + stale-selection smoke + diagnostics invariant smoke; parity = operators/citations/workspace organization; differentiator = local-first Unified Search with deterministic fixture-backed smoke routes (including saved-search roundtrip state assertions).
- 2026-02-11 code review sweep (trusted): top-k heap selection previously relied on implicit sort stability for exact ties, so ordering parity could drift under equal score + invalid timestamp fallback (`createdMs=0`) workloads; explicit input-order tie-breaking in both full-sort and top-k paths closes this reliability gap.
- 2026-02-11 bounded market scan (untrusted): current baseline still expects searchable history/workspaces plus explicit operator filtering and keyboard-led retrieval; OpenAI search docs, Perplexity thread/space docs, and Kagi filtering docs all reinforce this expectation. This cycle prioritized resilient local-state persistence and deterministic smoke coverage over net-new feature breadth. Sources: https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 gap map refresh (untrusted, synthesized): missing = multi-user auth/db/retrieval jobs; weak = saved-search roundtrip smoke + stale-selection smoke + perf thresholds; parity = operators/citations/workspace organization; differentiator = local-first Unified Search with deterministic fixture-backed smoke verification and explicit persistence failure feedback.
- 2026-02-11 code review sweep (trusted): Unified Search persistence used direct `localStorage.setItem` writes without guardrails, creating silent state-loss risk under quota or blocked storage. Guarded writes plus explicit toast feedback and regression tests reduce this reliability gap.
- 2026-02-11 bounded market scan (untrusted): current baseline in answer/search tools still emphasizes keyboard-first retrieval, explicit narrowing controls, and workspace organization; OpenAI docs highlight exact-match history search with `Cmd/Ctrl+K`, Perplexity docs highlight Threads/Spaces organization, and Kagi docs highlight operator/time filtering expectations. This cycle prioritized diagnosability (`?debug=1`) and deterministic keyboard/operator behavior to meet that baseline without adding risky surface area. Sources: https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 gap map refresh (untrusted, synthesized): missing = multi-user auth/DB/retrieval jobs; weak = local smoke coverage for seeded Unified Search datasets and saved-search roundtrip verification; parity = operators, citations, workspace organization; differentiator = local-first Unified Search with deterministic export evidence plus in-surface diagnostics and repair controls.
- 2026-02-11 code review sweep (trusted): `src/components/unified-search.tsx` had keyboard precedence logic embedded in the input handler with high regression risk; extracting a dedicated keyboard module plus pure action resolution tests reduced coupling and clarified behavior contracts for future query/operator work.
- 2026-02-11 bounded market scan (untrusted): baseline expectations continue to favor searchable history/workspaces plus keyboard-first retrieval and explicit narrowing controls; OpenAI docs emphasize history search + quick-find shortcut behavior, Perplexity docs emphasize thread/workspace organization, Kagi docs emphasize explicit filtering operators/time windows, and Notion’s Quick Find reinforces `Cmd/Ctrl+K` discovery norms. This supports prioritizing resilient local search state and deterministic operator behavior before adding broader surface area. Sources: https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt%3F.midi, https://help.openai.com/en/articles/11186788-search-the-web-using-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html, https://www.notion.com/help/search?id=9879398.
- 2026-02-11 bounded market scan (untrusted): OpenAI/Perplexity/Kagi docs continue to reinforce baseline expectations for searchable history/workspaces, keyboard-first retrieval, explicit filtering operators, and citation/source transparency; this cycle prioritized query-state resilience and measurable local-search performance evidence accordingly. Sources: https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 bounded market scan (untrusted): expected baseline still combines searchable history/workspaces with explicit query-narrowing controls; this cycle prioritized malformed local cache resilience so search stays trustworthy under real browser-state drift/corruption. Sources: https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 bounded market scan (untrusted): current expectation remains searchable history/workspaces plus explicit narrowing operators and keyboard-led retrieval; this cycle prioritized trustworthy export artifacts and accessible power-user controls to align with that baseline. Sources: https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 bounded market scan (untrusted): baseline answer/search products keep emphasizing searchable history/workspaces plus explicit narrowing controls; OpenAI documents chat-history and web-search capabilities, Perplexity documents thread context and spaces organization, and Kagi documents quote/operator/time filtering. This supports continuing to prioritize deterministic export evidence and explicit query control in Signal Search. Sources: https://help.openai.com/en/articles/11186788-search-the-web-using-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 bounded market scan (untrusted): current baseline across ChatGPT/Perplexity/Kagi continues to emphasize searchable history/workspaces, exact-match search behavior, and explicit query operators/time filters; this supports prioritizing deterministic exports and predictable operator semantics in Signal Search. Sources: https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 gap map refresh (untrusted, synthesized): missing = multi-user auth/db/retrieval jobs; weak = resilient automation scheduling + data portability diagnostics; parity = citations, thread/workspace organization, inline operators; differentiator = local-first unified search with in-place actions and deterministic export evidence.
- 2026-02-11 bounded market scan (untrusted): baseline research/search products emphasize fast keyboard-driven retrieval and explicit query narrowing; OpenAI help docs highlight global history search, Kagi emphasizes operator-level filtering control, and Linear’s command workflow reinforces keyboard-first discovery expectations for power users. Sources: https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://help.kagi.com/kagi/features/filtering-results.html, https://linear.app/blog/introducing-command-k.
- 2026-02-11 bounded market scan (untrusted): baseline answer engines expose explicit search narrowing controls and searchable workspace history; clear operator semantics are table-stakes for trust. Perplexity documents thread context and Spaces organization, OpenAI documents ChatGPT history search (including keyboard-open behavior), and Kagi documents explicit query operators/time filters. Sources: https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads, https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces, https://help.openai.com/en/articles/11487644-search-in-chatgpt, https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://help.kagi.com/kagi/features/filtering-results.html.
- 2026-02-11 market scan (untrusted): Perplexity and ChatGPT both set baseline expectations around searchable history/workspaces and mode/source controls; Kagi highlights explicit query filtering controls (including verbatim/time constraints). This reinforces that operator semantics must be deterministic and transparent, especially in mixed-result surfaces. Sources: Perplexity thread capabilities (https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads), Perplexity spaces (https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces), OpenAI help on history/search (https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt, https://help.openai.com/en/articles/11487644-search-in-chatgpt), Kagi filtering docs (https://help.kagi.com/kagi/features/filtering-results.html).
- Operator parsing that strips tokens from free text must be paired with per-type operator enforcement; otherwise unsupported operators silently widen results and degrade trust.
- Scorecard failures were not from scan results; they were caused by workflow policy validation when `publish_results: true` was combined with write-level permissions.
- Release automation can hard-fail in repos where GitHub Actions cannot open PRs; explicit gating keeps `main` green while preserving manual release capability.
- Signal Search usability improves when actions happen in the search surface itself; forcing users back into Library for pin/archive/space edits adds unnecessary friction.
- Users rely on notes and citations during follow-ups, so search must index those fields; otherwise “Signal Search” fails to find high-signal content.
- LocalStorage remains the single source of truth; until server sync exists we need light-weight resiliency features (like snippets plus filtering) to avoid data lock-in.
- Next.js static generation can execute transitive deps in SSR bundles; importing `docx` at module scope pulled in browserified Node stream polyfills that touch `localStorage` and emitted warnings. Lazy-loading large export deps keeps builds clean and reduces baseline bundle weight.
- Market scan (untrusted, links only): comparable products emphasize citations + “save/organize” workflows; keyboard shortcuts (search focus/clear) and structured filters/operators show up as baseline UX expectations.
- Sources: Perplexity (https://www.perplexity.ai) help: thread retention + recovery (https://www.perplexity.ai/help-center/en/articles/12637451-where-did-my-threads-go), thread context + web toggle constraints (https://www.perplexity.ai/help-center/en/articles/10354775-technical-capabilities-of-threads), Spaces overview (https://www.perplexity.ai/help-center/en/articles/10352961-what-are-spaces); Kagi Assistant docs (https://help.kagi.com/kagi/ai/assistant.html); Kagi filtering docs (verbatim + time windows) (https://help.kagi.com/kagi/features/filtering-results.html); Obsidian Tasks Presets (saved query presets pattern) (https://publish.obsidian.md/tasks/Queries/Presets); OpenAI Help Center: Search in ChatGPT (https://help.openai.com/en/articles/11487644-search-in-chatgpt); OpenAI Help Center: ChatGPT history search (exact match + Cmd/Ctrl+K) (https://help.openai.com/en/articles/10056348-how-do-i-search-my-chat-history-in-chatgpt%3F.midi); OpenAI Help Center: ChatGPT data export flow (https://help.openai.com/en/articles/7260999-how-do-i-export-my-chatgpt-history-and-data).
- Gap map (untrusted, synthesized):
- Missing: accounts/auth + database-backed storage + secure sharing model; robust file ingestion (PDF/DOCX/etc) + retrieval.
- Weak: durable background jobs (research/tasks) + notifications/timezones; user-facing recovery flows for local-only data.
- Parity: citations + web toggle, multi-turn threads, exports, “save/organize” surfaces (collections/spaces).
- Differentiator: local-first unified search with in-place bulk actions and workspace templates without forcing signup.

## Notes
- This file is maintained by the autonomous clone loop.

### Auto-discovered Open Checklist Items (2026-02-08)
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Auth and user accounts (email/SSO placeholder with secure sessions).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Database migration for threads/spaces/collections/files/tasks.
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Server-side file ingestion pipeline (PDF/DOCX/PPTX/CSV minimum).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Embeddings + retrieval API with citation grounding from indexed docs.
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Background job runner for research/tasks with persistent job state.
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Secure share model (private/link/org scopes with authorization checks).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Research job orchestration with intermediate checkpoints and resumability.
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Follow-up while research is running (job continuation API).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Space-level source controls and query policies.
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Better task scheduler (cron UI, timezone handling, notifications).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Rich export engine (DOCX/PDF/HTML templates with citations and metadata).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] OSS model connector layer (vLLM/Ollama/hosted OSS providers).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Auto-router policy (cost/latency/quality profile routing).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Connector framework for external systems (Drive/Notion/GitHub baseline).
- /Users/sarvesh/code/chat_with_llm/PRODUCT_GOALS.md:- [ ] Admin analytics dashboard and usage insights.
- /Users/sarvesh/code/chat_with_llm/.github/PULL_REQUEST_TEMPLATE.md:- [ ] `npm test`
- /Users/sarvesh/code/chat_with_llm/.github/PULL_REQUEST_TEMPLATE.md:- [ ] `npm run lint`
- /Users/sarvesh/code/chat_with_llm/.github/PULL_REQUEST_TEMPLATE.md:- [ ] `npm run build`
